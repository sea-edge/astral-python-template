pre-commit:
  parallel: true
  commands:
    ruff-format:
      run: |
        sh -c '
          set -eu
          files=$(git diff --cached --name-only --diff-filter=ACMR | grep -E "\\.py$" || true)
          [ -z "$files" ] && exit 0
          uv run ruff format $files
          git add $files
        '
    ruff-check:
      run: |
        sh -c '
          set -eu
          files=$(git diff --cached --name-only --diff-filter=ACMR | grep -E "\\.py$" || true)
          [ -z "$files" ] && exit 0
          uv run ruff check $files
        '

pre-push:
  parallel: true
  commands:
    ty-check:
      run: uv run ty check
